---
import { Image } from "astro:assets";
import kvImage from "../assets/kv/kv-1.webp";
import kvSpImage from "../assets/kv/kv_sp-1.webp";

import { useTranslations } from "../i18n/utils";
const { currentLocale } = Astro;
const lang = (currentLocale || "ja") as "ja" | "en" | "de";
const t = useTranslations(lang);
---

<div class="keyvisual">
  <Image
    loading="eager"
    class="kv pc"
    src={kvImage}
    alt="古民家梅屋キービジュアル"
  />
  <Image
    loading="eager"
    class="kv"
    src={kvSpImage}
    alt="古民家梅屋キービジュアル SP"
  />
  <div></div>
  <div class={`catch ${lang != "ja" ? "not-jp" : ""}`}>
    <p>{t("kv.catch")}</p>
  </div>
</div>

<style lang="scss">
  .keyvisual {
    position: relative;

    &::after {
      content: "";
      display: block;
      position: absolute;
      inset: 0;
      background-color: #000;
      opacity: 0.15;
    }

    .kv {
      width: 100%;
      height: auto;
      display: block;
      &.pc {
        display: none;
      }
    }

    @include g.mq() {
      .kv {
        display: none;
        &.pc {
          display: block;
        }
      }
    }
  }
  @keyframes catchFadeIn {
    0% {
      opacity: 0;
    }

    100% {
      opacity: 1;
    }
  }

  .catch {
    position: absolute;
    z-index: 1;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;

    p {
      writing-mode: vertical-rl;
      color: #fff;
      font-family: var(--font-serif-jp);

      font-size: 30rem;
      font-weight: bold;
      text-shadow: 0 0 10rem var(--color-main);
      opacity: 0;
      animation-delay: 1s;
      animation: catchFadeIn 0.6s forwards;
    }

    &.not-jp {
      p {
        writing-mode: horizontal-tb;
        max-width: calc(100% - 32rem);
        margin: 0 auto;
        translate: 0 0;
        font-size: 25rem;
      }
    }

    @include g.mq() {
      p {
        font-size: 36rem;
      }

      &.not-jp {
        p {
          font-size: 36rem;
        }
      }
    }
  }
</style>
